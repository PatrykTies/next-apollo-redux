{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport withApollo from '../../lib/withApollo';\nimport { loadData } from '../../lib/placeholder/actions';\nimport { startClock } from '../../lib/clock/actions';\nimport App from '../../components/App';\nimport Header from '../../components/Header';\nimport Submit from '../../components/Submit';\nimport PostList from '../../components/PostList';\n\nclass BlogIndex extends React.Component {\n  static async getInitialProps({\n    Component,\n    pageProps,\n    ctx: {\n      store\n    }\n  }) {\n    // THIS NOW GIVES undefined on SSR\n    // WHEN USED INITIAL STATE IT WAS WORKING SSR\n    // THAT MEANS EACH /page MUST RELOAD DATA AGAIN\n    const postId = 1;\n    await store.dispatch(loadData(postId)); // YES IT WORKED\n    // NOW BOTH GRAPHQL AND REST STUFF IS SSR ====> CHECK console.log() and page source\n\n    const state = store.getState();\n    const title = state.placeholder.title;\n    console.log('REDUX', title);\n    return {\n      pageProps,\n      title,\n      store\n    };\n  } // constructor(props){\n  //   super(props)\n  //   this.user = props.state.placeholder.title\n  // }\n  // componentDidMount () {\n  //   this.props.store.dispatch(startClock())\n  // }\n\n\n  render() {\n    return __jsx(App, null, this.props.title, __jsx(Header, null), __jsx(Submit, null), __jsx(PostList, null));\n  }\n\n}\n\nexport default withApollo(BlogIndex);","map":{"version":3,"sources":["/Users/patrykties/Desktop/LEARNING/with-apollo-and-redux-saga/pages/blog/index.js"],"names":["React","withApollo","loadData","startClock","App","Header","Submit","PostList","BlogIndex","Component","getInitialProps","pageProps","ctx","store","postId","dispatch","state","getState","title","placeholder","console","log","render","props"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAASC,QAAT,QAAyB,+BAAzB;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,2BAArB;;AAEA,MAAMC,SAAN,SAAwBR,KAAK,CAACS,SAA9B,CAAwC;AACtC,eAAaC,eAAb,CAA8B;AAAED,IAAAA,SAAF;AAAaE,IAAAA,SAAb;AAAwBC,IAAAA,GAAG,EAAC;AAACC,MAAAA;AAAD;AAA5B,GAA9B,EAAqE;AACnE;AACA;AACA;AACA,UAAMC,MAAM,GAAG,CAAf;AACA,UAAMD,KAAK,CAACE,QAAN,CAAeb,QAAQ,CAACY,MAAD,CAAvB,CAAN,CALmE,CAK5B;AACvC;;AAEA,UAAME,KAAK,GAAGH,KAAK,CAACI,QAAN,EAAd;AACA,UAAMC,KAAK,GAAGF,KAAK,CAACG,WAAN,CAAkBD,KAAhC;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBH,KAArB;AACA,WAAO;AAAEP,MAAAA,SAAF;AAAaO,MAAAA,KAAb;AAAoBL,MAAAA;AAApB,KAAP;AACD,GAbqC,CAetC;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAEAS,EAAAA,MAAM,GAAI;AACR,WACE,MAAC,GAAD,QACG,KAAKC,KAAL,CAAWL,KADd,EAEE,MAAC,MAAD,OAFF,EAGE,MAAC,MAAD,OAHF,EAIE,MAAC,QAAD,OAJF,CADF;AAQD;;AAjCqC;;AAoCxC,eAAejB,UAAU,CAACO,SAAD,CAAzB","sourcesContent":["import React from 'react'\nimport withApollo from '../../lib/withApollo'\nimport { loadData } from '../../lib/placeholder/actions'\nimport { startClock } from '../../lib/clock/actions'\nimport App from '../../components/App'\nimport Header from '../../components/Header'\nimport Submit from '../../components/Submit'\nimport PostList from '../../components/PostList'\n\nclass BlogIndex extends React.Component {\n  static async getInitialProps ({ Component, pageProps, ctx:{store} }) {\n    // THIS NOW GIVES undefined on SSR\n    // WHEN USED INITIAL STATE IT WAS WORKING SSR\n    // THAT MEANS EACH /page MUST RELOAD DATA AGAIN\n    const postId = 1;\n    await store.dispatch(loadData(postId)) // YES IT WORKED\n    // NOW BOTH GRAPHQL AND REST STUFF IS SSR ====> CHECK console.log() and page source\n\n    const state = store.getState();\n    const title = state.placeholder.title;\n    console.log('REDUX', title)\n    return { pageProps, title, store }\n  }\n\n  // constructor(props){\n  //   super(props)\n  //   this.user = props.state.placeholder.title\n  // }\n\n  // componentDidMount () {\n  //   this.props.store.dispatch(startClock())\n  // }\n\n  render () {\n    return (\n      <App>\n        {this.props.title}\n        <Header />\n        <Submit />\n        <PostList />\n      </App>\n    )\n  }\n}\n\nexport default withApollo(BlogIndex);"]},"metadata":{},"sourceType":"module"}