{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport withApollo from '../../lib/withApollo';\nimport { loadData } from '../../lib/placeholder/actions';\nimport { startClock } from '../../lib/clock/actions';\nimport App from '../../components/App';\nimport Header from '../../components/Header';\nimport Submit from '../../components/Submit';\nimport PostList from '../../components/PostList';\n\nvar BlogIndex =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BlogIndex, _React$Component);\n\n  function BlogIndex() {\n    _classCallCheck(this, BlogIndex);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(BlogIndex).apply(this, arguments));\n  }\n\n  _createClass(BlogIndex, [{\n    key: \"render\",\n    // constructor(props){\n    //   super(props)\n    //   this.user = props.state.placeholder.title\n    // }\n    // componentDidMount () {\n    //   this.props.store.dispatch(startClock())\n    // }\n    value: function render() {\n      return __jsx(App, null, this.props.title, __jsx(Header, null), __jsx(Submit, null), __jsx(PostList, null));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var Component, pageProps, store, postId, state, title;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Component = _ref.Component, pageProps = _ref.pageProps, store = _ref.ctx.store;\n                // THIS NOW GIVES undefined on SSR\n                // WHEN USED INITIAL STATE IT WAS WORKING SSR\n                // THAT MEANS EACH /page MUST RELOAD DATA AGAIN\n                postId = 1;\n                _context.next = 4;\n                return store.dispatch(loadData(postId));\n\n              case 4:\n                // YES IT WORKED\n                // NOW BOTH GRAPHQL AND REST STUFF IS SSR ====> CHECK console.log() and page source\n                state = store.getState();\n                title = state.placeholder.title;\n                console.log('REDUX', title);\n                return _context.abrupt(\"return\", {\n                  pageProps: pageProps,\n                  title: title,\n                  store: store\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return BlogIndex;\n}(React.Component);\n\nexport default withApollo(BlogIndex);","map":{"version":3,"sources":["/Users/patrykties/Desktop/LEARNING/with-apollo-and-redux-saga/pages/blog/index.js"],"names":["React","withApollo","loadData","startClock","App","Header","Submit","PostList","BlogIndex","props","title","Component","pageProps","store","ctx","postId","dispatch","state","getState","placeholder","console","log"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAASC,QAAT,QAAyB,+BAAzB;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,2BAArB;;IAEMC,S;;;;;;;;;;;;;AAeJ;AACA;AACA;AACA;AAEA;AACA;AACA;6BAEU;AACR,aACE,MAAC,GAAD,QACG,KAAKC,KAAL,CAAWC,KADd,EAEE,MAAC,MAAD,OAFF,EAGE,MAAC,MAAD,OAHF,EAIE,MAAC,QAAD,OAJF,CADF;AAQD;;;;;;;;;;;;AAhC+BC,gBAAAA,S,QAAAA,S,EAAWC,S,QAAAA,S,EAAgBC,K,QAALC,G,CAAKD,K;AACzD;AACA;AACA;AACME,gBAAAA,M,GAAS,C;;uBACTF,KAAK,CAACG,QAAN,CAAed,QAAQ,CAACa,MAAD,CAAvB,C;;;AAAiC;AACvC;AAEME,gBAAAA,K,GAAQJ,KAAK,CAACK,QAAN,E;AACRR,gBAAAA,K,GAAQO,KAAK,CAACE,WAAN,CAAkBT,K;AAChCU,gBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBX,KAArB;iDACO;AAAEE,kBAAAA,SAAS,EAATA,SAAF;AAAaF,kBAAAA,KAAK,EAALA,KAAb;AAAoBG,kBAAAA,KAAK,EAALA;AAApB,iB;;;;;;;;;;;;;;;;;;;EAZab,KAAK,CAACW,S;;AAoC9B,eAAeV,UAAU,CAACO,SAAD,CAAzB","sourcesContent":["import React from 'react'\nimport withApollo from '../../lib/withApollo'\nimport { loadData } from '../../lib/placeholder/actions'\nimport { startClock } from '../../lib/clock/actions'\nimport App from '../../components/App'\nimport Header from '../../components/Header'\nimport Submit from '../../components/Submit'\nimport PostList from '../../components/PostList'\n\nclass BlogIndex extends React.Component {\n  static async getInitialProps ({ Component, pageProps, ctx:{store} }) {\n    // THIS NOW GIVES undefined on SSR\n    // WHEN USED INITIAL STATE IT WAS WORKING SSR\n    // THAT MEANS EACH /page MUST RELOAD DATA AGAIN\n    const postId = 1;\n    await store.dispatch(loadData(postId)) // YES IT WORKED\n    // NOW BOTH GRAPHQL AND REST STUFF IS SSR ====> CHECK console.log() and page source\n\n    const state = store.getState();\n    const title = state.placeholder.title;\n    console.log('REDUX', title)\n    return { pageProps, title, store }\n  }\n\n  // constructor(props){\n  //   super(props)\n  //   this.user = props.state.placeholder.title\n  // }\n\n  // componentDidMount () {\n  //   this.props.store.dispatch(startClock())\n  // }\n\n  render () {\n    return (\n      <App>\n        {this.props.title}\n        <Header />\n        <Submit />\n        <PostList />\n      </App>\n    )\n  }\n}\n\nexport default withApollo(BlogIndex);"]},"metadata":{},"sourceType":"module"}